{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Samplepedia{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 4 CSS (REQUIRED) -->
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

  <!-- Font Awesome (for icons) -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- AdminLTE v3 CSS (REQUIRED) -->
  <link rel="stylesheet" href="{% static 'adminlte/css/adminlte.min.css' %}">
  <style>
  .spoiler {
    display: inline-block;
    position: relative;
    border-radius: 4px;
    padding: 2px 6px;
    background: rgba(0,0,0,0.25);
    cursor: pointer;
  }
  .spoiler > .spoiler-text {
    color: transparent;
    user-select: none;
  }
  .spoiler::after {
    content: "Spoiler, click to reveal";
    position: absolute;
    inset: 0;
    padding: 2px 6px;
    color: rgba(255,255,255,0.85);
    background: rgba(0,0,0,0.45);
    border-radius: 4px;
    display: flex;
    align-items: center;
  }
  .spoiler.revealed > .spoiler-text {
    color: inherit;
    user-select: text;
  }
  .spoiler.revealed::after {
    display: none;
  }
  
  /* Tag colors - generates consistent color per tag */
  .badge-tag {
    color: white !important;
    text-decoration: none;
  }
</style>

  
</head>

<body class="hold-transition layout-top-nav">
<div class="wrapper">

  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-dark">
    <div class="container-fluid">
      <a href="/" class="navbar-brand">
        <span class="font-weight-bold">Samplepedia</span>
      </a>

      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a href="/" class="nav-link">Browse</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" id="darkToggle">Dark</a>
        </li>
        <li class="nav-item">
          <a href="/admin/" class="nav-link">Admin</a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Content -->
  <div class="content-wrapper">
    {% block content %}{% endblock %}
  </div>

</div>

<!-- JS (LOAD ONCE, IN THIS ORDER) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'adminlte/js/adminlte.min.js' %}"></script>

<!-- Dark mode toggle -->
<script>
  const key = "adminlte-dark";
  const body = document.body;
  const toggle = document.getElementById("darkToggle");

  if (localStorage.getItem(key) === "on") {
    body.classList.add("dark-mode");
  }

  if (toggle) {
    toggle.onclick = function (e) {
      e.preventDefault();
      body.classList.toggle("dark-mode");
      localStorage.setItem(
        key,
        body.classList.contains("dark-mode") ? "on" : "off"
      );
    };
  }
</script>

<script>
  document.addEventListener("click", function (e) {
    const el = e.target.closest(".spoiler");
    if (el) el.classList.toggle("revealed");
  });
</script>

<!-- Tag color generator -->
<script>
  // Generate consistent color for each tag based on tag name
  function hashString(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = ((hash << 5) - hash) + str.charCodeAt(i);
      hash = hash & hash;
    }
    return Math.abs(hash);
  }
  
  document.querySelectorAll('.badge-tag').forEach(badge => {
    const tagName = badge.textContent.trim();
    const hue = hashString(tagName) % 360;
    const saturation = 65;
    const lightness = 50;
    badge.style.backgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
  });
</script>

</body>
</html>
